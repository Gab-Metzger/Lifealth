<div ng-include="'partials/includes/headerPatient.html'"></div>
<!--<material-sidenav class="material-sidenav-left material-whiteframe-z2" component-id="left">
  <material-toolbar class="material-theme-light">
    <div class="material-toolbar-tools">Menu</div>
  </material-toolbar>
  <material-list>
    <material-item ng-click="goToMonitoring()">
      <div class="material-tile-left">
        <span class="glyphicon glyphicon-chevron-right"></span>
      </div>
      <div class="material-tile-content">
        <h2>Biométrie</h2>
      </div>
    </material-item>
    <material-item ng-click="goToMonitoring()">
      <div class="material-tile-left">
        <span class="glyphicon glyphicon-chevron-right"></span>
      </div>
      <div class="material-tile-content">
        <h2>Biologie</h2>
      </div>
    </material-item>
    <material-item ng-click="goToMonitoring()">
      <div class="material-tile-left">
        <span class="glyphicon glyphicon-chevron-right"></span>
      </div>
      <div class="material-tile-content">
        <h2>Imagerie</h2>
      </div>
    </material-item>
    <material-item ng-click="goToMonitoring()">
      <div class="material-tile-left">
        <span class="glyphicon glyphicon-chevron-right"></span>
      </div>
      <div class="material-tile-content">
        <h2>Consultations</h2>
      </div>
    </material-item>
  </material-list>
</material-sidenav>-->
<div class="patient row">
  <div class="col-md-5">
    <div class="panel panel-primary">
      <!-- Default panel contents -->
      <div class="panel-heading">
        <div>
          <span>Période</span>
          <input
            type="daterange"
            ng-model="datesBP"
            min-date="minDateRange"
            max-date="maxDateRange"
            format="DD/MM"
            separator="--"
            ranges="defaultRange">
          <span class="glyphicon glyphicon-plus right" ng-click="addBPData()"></span>
        </div>
      </div>
      <table class="table table-hover" ng-if="!searchingBp">
        <thead>
        <tr>
          <th>Date</th>
          <th>Pression artérielle (mmhg)</th>
          <th>Fc (Bat/mn)</th>
          <th></th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="BP in BPDatas[bpIndex]" ng-switch="BP.manual">
          <td ng-switch-when="undefined">{{BP.MDate}}</td>
          <td ng-switch-when="undefined" ng-style="bgColor(BP)">{{BP.HP}}/{{BP.LP}}</td>
          <td ng-switch-when="undefined">{{BP.HR}}</td>
          <td ng-switch-when="undefined" ng-show="BP._id">
            <span class="glyphicon glyphicon-pencil" ng-click="editBPData(BP)"></span>
            <span class="glyphicon glyphicon-trash" ng-click="removeBPData(BP)"></span>
          </td>
          <td ng-switch-when="true">
            <input name="MDate" type="text" ng-model="BP.MDate"/>
          </td>
          <td ng-switch-when="true">
            <input name="HP" type="text" ng-model="BP.HP" mask="number"/> / <input name="LP" type="text" ng-model="BP.LP" mask="number"/>
          </td>
          <td ng-switch-when="true">
            <input name="HR" type="text" ng-model="BP.HR" mask="number"/>
          </td>
          <td ng-switch-when="true">
            <span class="glyphicon glyphicon-ok" ng-click="validBPData(BP)"></span>
            <span class="glyphicon glyphicon-remove" ng-click="cancelBPData(BP)"></span>
          </td>
        </tr>
        </tbody>
        <tfoot>
        <tr>
          <td colspan="3">
            <span ng-click="lastBpIndex()" ng-show="showLastBpIndex()"
                  class="glyphicon glyphicon-step-backward left"></span>
            <span ng-click="previousBpIndex()" ng-show="showPreviousBpIndex()"
                  class="glyphicon glyphicon-backward left"></span>
            <span ng-click="firstBpIndex()" ng-show="showFirstBpIndex()"
                  class="glyphicon glyphicon-step-forward right"></span>
            <span ng-click="nextBpIndex()" ng-show="showNextBpIndex()" class="glyphicon glyphicon-forward right"></span>
            <span ng-bind="getBPDataLength()"></span>
          </td>
        </tr>
        </tfoot>
      </table>
      <div class="loader" ng-if="searchingBp">
        <img src="images/loader.gif"/>
      </div>
    </div>
  </div>
  <div class="col-md-7">
    <div class="col-md-offset-2">
      <h4>Statistiques de pression artérielle sur la période sélectionnée</h4>
    </div>
    <nvd3-discrete-bar-chart
      data="BPClassified"
      id="BGChart"
      height="250"
      showXAxis="true"
      showYAxis="true"
      showValues="true"
      interactive="true"
      useInteractiveGuideline="true"
      xAxisTickFormat="xAxisTickFormat()"
      yAxisTickFormat="yAxisTickFormat()"
      color="color()">
      <svg></svg>
    </nvd3-discrete-bar-chart>
    <div class="col-md-offset-10">
      <h6>* Classification OMS</h6>
    </div>
  </div>
</div>

<div class="patient row">
  <div class="col-md-5">
    <div class="panel panel-primary">
      <!-- Default panel contents -->
      <div class="panel-heading">
        <div>
          <span>Période</span>
          <input
            type="daterange"
            ng-model="datesBG"
            min-date="minDateRange"
            max-date="maxDateRange"
            format="DD/MM"
            separator="--"
            ranges="defaultRange">

                </div>
                <div>
                    <span>FILTRE</span>
                    <select ng-model="momentBG" ng-change="filter()" class="form-control" style="width: 160px;display: inline">
                        <option value="Aucun">Aucun</option>
                        <option value="A jeun">A Jeun</option>
                        <option value="Après petit-déjeuner">Après petit-déjeuner</option>
                        <option value="Avant repas du midi">Avant repas du midi</option>
                        <option value="Après repas du midi">Après repas du midi</option>
                        <option value="Avant repas du soir">Avant repas du soir</option>
                        <option value="Après repas du soir">Après repas du soir</option>
                    </select>
                </div>
            </div>
            <table class="table table-hover" ng-if="!searchingBg">
                <thead>
                <tr>
                    <th>Date</th>
                    <th>Moment</th>
                    <th>Glycémie (mg/dl)</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="BG in BGDatas[bgIndex]">
                    <td>{{BG.MDate}}</td>
                    <td>{{BG.DinnerSituation}}</td>
                    <td ng-style="momentColor(BG)">{{BG.BG}}</td>
                </tr>
                </tbody>
              <tfoot>
              <tr>
                <td colspan="3">
                  <span ng-click="lastBgIndex()" ng-show="showLastBgIndex()" class="glyphicon glyphicon-step-backward left"></span>
                  <span ng-click="previousBgIndex()" ng-show="showPreviousBgIndex()" class="glyphicon glyphicon-backward left"></span>
                  <span ng-click="firstBgIndex()" ng-show="showFirstBgIndex()" class="glyphicon glyphicon-step-forward right"></span>
                  <span ng-click="nextBgIndex()" ng-show="showNextBgIndex()" class="glyphicon glyphicon-forward right"></span>
                  <span ng-bind="getBGDataLength()"></span>
                </td>
              </tr>
              </tfoot>
            </table>
            <div class="loader" ng-if="searchingBg">
                <img src="images/loader.gif"/>
            </div>
        </div>

  </div>
  <div class="col-md-7">
    <div class="col-md-offset-2">
      <h4>Evolution de la glycémie capillaire sur la période sélectionnée (mg/dl)</h4>
    </div>
    <nvd3-line-chart
      id="chartBG"
      data="BGClassified"
      showYAxis="true"
      height="250"
      xAxisTickFormat="xBGAxisTickFormat()"
      tooltips="true"
      stacked="true"
      interactive="true">
    </nvd3-line-chart>
    <div class="col-md-offset-2">
      <span>hba1c prévisionnelle : </span><span ng-bind="hba1c"> *</span>
      <br/>
      <small ng-if="currentUser.role !== 'DOCTOR'">*il s'agit d'une projection à partir de la moyenne de vos glycémies
        sur la période sélectionnée. L'hba1c prévisionnelle est une information
        qui vous permet de vous situer par rapport à l'objectif fixé par votre médecin.
      </small>
    </div>
  </div>
</div>
<div></div>

<div ng-include="'partials/includes/footer.html'"></div>
